<html>
<head>
<meta charset="UTF-8">
<title>kakaoMapTest</title>
</head>
<body>
<h1>카카오맵 마커 테스트</h1>
	<div id="map" style="width:500px;height:400px;"></div>
	<div id="coordinates"></div>
	<input type="text" id="xxx" value = "37.39809559577211"><br>
	<input type="text" id="yyy" value = "127.01761088033732">
	<input type="button" value="현재위치가져오기(안드로이드위치정보)" onclick="javascript:getCoordinates();">
	<input type="button" value="현재위치가져오기(브라우저위치정보)" onclick="javascript:getLocation();">
	<input type="button" value="마커추가" onclick="javascript:markerClick();">
	<input type="button" value="메인으로" onclick="javascript:backSpace();">
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b9a7d7c6593032a6726aa2aaa6003cad"></script>
<script>
	var container = document.getElementById('map');
	var options = {
	    center: new kakao.maps.LatLng(37.49809559577211, 127.02761088033732),
	    level: 3
	};
	
	var map = new kakao.maps.Map(container, options);
	
	var markerPosition  = new kakao.maps.LatLng(37.49809559577211, 127.02761088033732); 
	
	var marker = new kakao.maps.Marker({
	    position: markerPosition
	});
	
	marker.setMap(map);
	
function markerClick() {
	var markerPosition  = new kakao.maps.LatLng($("#xxx").val(), $("#yyy").val()); 

	var marker = new kakao.maps.Marker({
	    position: markerPosition
	});

	marker.setMap(map);
}

function backSpace() {
	location.href = '/index.html';
}

function getCoordinates() {
	// Call getCoordinates method of WebAppInterface
    var coordinates = window.android.getCoordinates();
    
    // Check if location is found
    if (coordinates != "Location not found") {
        $("#xxx").val(coordinates.latitude);
        $("#yyy").val(coordinates.longitude);
    } else {
        // Display error message
        document.getElementById("coordinates").innerHTML = "Location not found";
    }
}

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        alert("Geolocation is not supported by this browser.");
    }
}

function showPosition(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;

    $("#xxx").val(latitude);
    $("#yyy").val(longitude);
    // 안드로이드에서 좌표값 가져오기
//     Android.getCoordinates(latitude, longitude);
}
</script>
</html>